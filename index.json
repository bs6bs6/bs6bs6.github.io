[{"categories":["Wsl"],"content":"SSH to WSL 同一个局域网下实现Mac ssh连接WSL。 Task.ps1作为定时任务，windows内设置开机执行 # 获取管理员权限 If (-NOT ([Security.Principal.WindowsPrincipal][Security.Principal.WindowsIdentity]::GetCurrent()).IsInRole([Security.Principal.WindowsBuiltInRole]\"Administrator\")) { $arguments = \"\u0026 '\" + $myinvocation.mycommand.definition + \"'\" Start-Process powershell -Verb runAs -ArgumentList $arguments Break } $wsl2Name = \"Ubuntu-22.04\" # 设置WSL2镜像的名字 $wsl2PORT = 2222 # 设置WSL2中sshd中的端口 $listenPORT = 2222 # 设置windows监听的端口，访问windows该端口将转发给WSL2中的上面那个端口 # 获取WSL2的eth0的IP地址 wsl -d $wsl2Name sudo service ssh --full-restart $wsl2inet = wsl -d $wsl2Name ifconfig | Select-String -Pattern \"inet.*?(?\u003cip\u003e[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}).*?net\" $wsl2ip = $wsl2inet.Matches[0].Groups.Item(\"ip\").Value # 设置windows到WSL2的端口转发 netsh interface portproxy add v4tov4 listenaddress=0.0.0.0 listenport=$listenPORT connectaddress=$wsl2ip connectport=$wsl2PORT # 打开防火墙，放行外部访问本机的流量 netsh advfirewall firewall add rule name=WSL2 dir=in action=allow protocol=TCP localport=$listenPORT ","date":"2023-08-21","objectID":"/ssh2wsl/:0:1","tags":["wsl","ssh"],"title":"MacOS通过SSH连接Wsl","uri":"/ssh2wsl/"},{"categories":["test"],"content":"Hello World! ","date":"2023-07-16","objectID":"/hello/:0:1","tags":["Hello"],"title":"Hello","uri":"/hello/"}]